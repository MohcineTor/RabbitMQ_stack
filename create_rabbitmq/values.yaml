resources:
  requests:
    cpu: ${REQUESTS_CPU}
    memory: ${REQUESTS_MEMORY}
  limits:
    cpu: ${LIMITS_CPU}
    memory: ${LIMITS_MEMORY}
auth:
  tls:
    enabled: true
    autoGenerated: true
    failIfNoPeerCert: false
    sslOptionsVerify: verify_peer
extraPlugins: "rabbitmq_amqp1_0 rabbitmq_prometheus rabbitmq_management"
extraSecrets:
  ${INSTANCE_NAME}-load-definition:
    load_definition.json: |
      {
        "users": [
          {
            "name": "${ADMIN_USERNAME}",
            "password": "${ADMIN_PASSWORD}",
            "tags": "administrator"
          }
        ],
        "vhosts": [
          {
            "name": "Dev"
          }
        ],
        "permissions": [
          {
            "user": "${ADMIN_USERNAME}",
            "vhost": "Dev",
            "configure": ".*",
            "write": ".*",
            "read": ".*"
          }
        ]
      }
loadDefinition:
  enabled: true
  existingSecret: ${INSTANCE_NAME}-load-definition
extraConfiguration: |
  load_definitions = /app/load_definition.json
